# مشخصات قابلیت AI Assist (شفاف و قابل مشاهده)

این پروژه ظاهر و رفتار مرورگر پایه را حفظ می‌کند (تب‌ها، نوار آدرس، ناوبری)، و فقط یک قابلیت اضافه دارد:

- گرفتن اسکرین‌شات از ناحیه انتخابی کاربر و ارسال به APIهای هوش مصنوعی.

## اصل مهم طراحی

- **هیچ حالت مخفی/نامرئی/استتاری پیاده‌سازی نمی‌شود.**
- ورود به AI Assist باید با نشانه واضح در UI انجام شود.
- نمایش پاسخ نیز باید واضح و کاربرمحور باشد (BottomSheet/Panel).

## رفتار موردنیاز تنظیمات AI

1. **Provider List (مرتب‌سازی و اولویت)**
   - کاربر لیست APIها (OpenAI / Gemini / ... ) را تعریف می‌کند.
   - هر Provider دارای `priority` است.
   - تلاش‌ها به ترتیب اولویت انجام می‌شوند.

2. **Failover Policy**
   - برای هر Provider: حداکثر 2 تلاش.
   - timeout هر تلاش: 10 ثانیه.
   - اگر Provider بعد از دو تلاش موفق نشود، موقتاً unavailable می‌شود و سیستم سراغ Provider بعدی می‌رود.

3. **Prompt List**
   - کاربر می‌تواند Promptها را CRUD کند.
   - قبل از ارسال انتخاب می‌شود که:
     - Prompt فعال ارسال شود، یا
     - هیچ Promptی ارسال نشود.

4. **نمایش پاسخ تستی (عدد گزینه)**
   - در کنار متن کامل پاسخ، یک فیلد واضح با عنوان مانند
     `گزینه پیشنهادی: 2`
     نمایش داده می‌شود (اگر از پاسخ قابل استخراج باشد).
   - این نمایش مخفی نیست.

## پشتیبانی API

- OpenAI و Gemini از طریق abstraction یکسان پشتیبانی می‌شوند.
- کلیدها نباید هاردکد شوند و باید در EncryptedSharedPreferences ذخیره شوند (در لایه اندروید هنگام ادغام).
